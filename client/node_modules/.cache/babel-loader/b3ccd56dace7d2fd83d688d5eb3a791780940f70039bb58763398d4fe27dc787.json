{"ast":null,"code":"var _jsxFileName = \"/home/jake/rem-stack/chess/client/src/components/ServerConnectedFormField.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ServerConnectedFormField = _ref => {\n  _s();\n  let {\n    placeholder,\n    name,\n    type,\n    value: propsValue,\n    validate,\n    onChange,\n    styles,\n    serverFunction,\n    required\n  } = _ref;\n  const [value, setValue] = useState(propsValue);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    setValue(propsValue);\n  }, [propsValue]);\n  const handleChange = evt => {\n    const value = evt.target.value;\n    let error = validate(value);\n    setValue(value);\n    setError(error);\n    onChange({\n      name,\n      value,\n      error\n    });\n  };\n  const handleBlur = async evt => {\n    const value = evt.target.value;\n    let error = validate(value);\n    if (name === 'email') {\n      const res = await fetch(serverFunction({\n        email: value\n      }));\n      const json = await res.json();\n      if (json.err.length) {\n        error = json.err;\n        setValue(value);\n        setError(error);\n        onChange({\n          name,\n          value,\n          error\n        });\n      } else {\n        error = undefined;\n        setValue(value);\n        setError(error);\n        onChange({\n          name,\n          value,\n          error\n        });\n      }\n    }\n    ;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-noct-orange\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: type,\n        name: name,\n        placeholder: placeholder || '',\n        value: value,\n        onChange: handleChange,\n        className: styles,\n        onFocus: e => e.target.placeholder = \"\",\n        onBlur: handleBlur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), required ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-noct-orange text-2xl pl-1\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-2 pl-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 81\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(ServerConnectedFormField, \"+wpu66EUlx0tAYVxmyXdCPfN5Gc=\");\n_c = ServerConnectedFormField;\nexport default ServerConnectedFormField;\nvar _c;\n$RefreshReg$(_c, \"ServerConnectedFormField\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ServerConnectedFormField","_ref","_s","placeholder","name","type","value","propsValue","validate","onChange","styles","serverFunction","required","setValue","error","setError","undefined","handleChange","evt","target","handleBlur","res","fetch","email","json","err","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onFocus","e","onBlur","_c","$RefreshReg$"],"sources":["/home/jake/rem-stack/chess/client/src/components/ServerConnectedFormField.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\ntype ServerConnectedFormFieldProps = {\n  placeholder?: string;\n  name: string;\n  type: string;\n  value: string;\n  validate: (value: string) => string | undefined;\n  onChange: (obj: {name: string, value: string, error: string | undefined}) => void;\n  styles: string;\n  serverFunction: Function;\n  required: boolean;\n};\n\nconst ServerConnectedFormField: React.FC<ServerConnectedFormFieldProps> = ({ \n  placeholder, \n  name, \n  type, \n  value: propsValue, \n  validate, \n  onChange, \n  styles, \n  serverFunction, \n  required,\n}) => {\n  const [value, setValue] = useState(propsValue);\n  const [error, setError] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    setValue(propsValue);\n  }, [propsValue]);\n\n  const handleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const value = evt.target.value;\n    let error = validate(value);\n\n    setValue(value);\n    setError(error);\n\n    onChange({name, value, error});\n  };\n\n  const handleBlur = async (evt: React.FocusEvent<HTMLInputElement>) => {\n    const value = evt.target.value;\n    let error = validate(value);\n    \n    if (name === 'email') {\n      const res = await fetch(serverFunction({email: value}));\n      const json = await res.json();\n      if (json.err.length) {\n        error = json.err;\n        setValue(value);\n        setError(error);\n        onChange({name, value, error});\n      } else {\n        error = undefined;\n        setValue(value);\n        setError(error);\n        onChange({name, value, error});\n      }\n    };\n  };\n\n  return (\n    <div className=\"w-full\">\n      <span className=\"text-noct-orange\">{error}</span>\n      <div className=\"flex\">\n        <input\n          type={type}\n          name={name}\n          placeholder={placeholder || ''}\n          value={value}\n          onChange={handleChange}\n          className={styles}\n          onFocus={(e: React.FocusEvent<HTMLInputElement>) => e.target.placeholder = \"\"}\n          onBlur={handleBlur}\n        />\n        {required ? <span className='text-noct-orange text-2xl pl-1'>*</span> : <div className='ml-2 pl-1'></div>}\n      </div>\n    </div>\n  );\n}\n  \nexport default ServerConnectedFormField;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}